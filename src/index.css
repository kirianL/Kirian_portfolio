@font-face {
  font-family: "DxFiggle";
  src: url("./assets/fonts/Dx Figgle.otf") format("opentype");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Chillax";
  src:
    url("./assets/fonts/fonts/Chillax-Variable.woff2") format("woff2"),
    url("./assets/fonts/fonts/Chillax-Variable.woff") format("woff"),
    url("./assets/fonts/fonts/Chillax-Bold.ttf") format("truetype");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 220 33% 98%;
    --foreground: 222 47% 11%;

    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;

    --primary: 221 83% 53%;
    --primary-foreground: 210 40% 98%;

    --secondary: 214 32% 91%;
    --secondary-foreground: 222 47% 11%;

    --muted: 214 32% 91%;
    --muted-foreground: 215 16% 47%;

    --accent: 221 83% 53%;
    --accent-foreground: 222 47% 11%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 221 83% 53%;

    --radius: 0.25rem;
  }

  .dark {
    --background: 222 47% 2%;
    --foreground: 210 40% 98%;

    --card: 222 47% 4%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 4%;
    --popover-foreground: 210 40% 98%;

    --primary: 217 91% 60%;
    --primary-foreground: 222 47% 11%;

    --secondary: 222 47% 8%;
    --secondary-foreground: 210 40% 98%;

    --muted: 222 47% 12%;
    --muted-foreground: 215 20% 65%;

    --accent: 217 91% 60%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    --border: 222 47% 15%;
    --input: 222 47% 15%;
    --ring: 217 91% 60%;
  }
  .leaflet-container {
    @apply !bg-card !font-[inherit];
  }
  .leaflet-container a {
    @apply !text-inherit;
  }
  .leaflet-div-icon {
    @apply !bg-transparent !border-none;
  }
  .leaflet-popup-content-wrapper,
  .leaflet-popup-content,
  .leaflet-popup-content p {
    @apply ![all:unset];
  }
  .leaflet-popup {
    @apply !animate-none;
  }
  .leaflet-popup-close-button {
    @apply ring-offset-background focus:ring-ring bg-secondary rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:outline-hidden;
  }
  .leaflet-tooltip,
  .leaflet-draw-tooltip {
    @apply !bg-foreground !text-background !animate-none !rounded-md !border-none !p-0 !px-3 !py-1.5 !shadow-none;
  }
  .leaflet-draw-tooltip:before {
    @apply bg-foreground !top-1/2 !right-0.5 size-2.5 translate-x-1/2 -translate-y-1/2 rotate-45 rounded-[2px] !border-none;
  }
  .leaflet-error-draw-tooltip {
    @apply !bg-destructive !text-white;
  }
  .leaflet-error-draw-tooltip:before {
    @apply bg-destructive;
  }
  .leaflet-draw-tooltip-subtext {
    @apply !text-background;
  }
  .leaflet-popup-tip-container,
  .leaflet-tooltip-top:before,
  .leaflet-tooltip-bottom:before,
  .leaflet-tooltip-left:before,
  .leaflet-tooltip-right:before {
    @apply hidden;
  }
  .leaflet-control-attribution {
    @apply !bg-muted rounded-md !px-[4px] !py-[2px] text-[10px] !leading-none !text-inherit;
  }
  .leaflet-draw-guide-dash {
    @apply rounded-full;
  }
  .leaflet-edit-marker-selected {
    @apply !border-transparent !bg-transparent;
    @apply !border-transparent !bg-transparent;
  }
  .marker-cluster div {
    @apply font-[inherit];
    @apply font-[inherit];
  }
}

@layer base {
  * {
    @apply border-border;
  }

  /* Custom scroll padding for fixed header */
  html {
    scroll-padding-top: 80px;
  }

  /* Optimize font rendering and loading */
  /* Optimize font rendering and loading */
  body {
    @apply bg-background text-foreground;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* text-rendering: optimizeLegibility; - Removed for mobile performance */
  }

  /* Global smooth theme transition - Colors ONLY to prevent layout jank */
  :root {
    --transition-duration: 0.1s; /* Ultra-fast, almost instant */
    --transition-timing: ease-out;
  }

  /* Utility for specific elements that NEED smooth color changes */
  .trans-colors {
    transition:
      background-color 0.2s ease,
      border-color 0.2s ease,
      color 0.2s ease,
      fill 0.2s ease,
      stroke 0.2s ease;
  }

  /* Disable smooth scroll for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Editorial Typography Scales */
  .text-editorial-huge {
    @apply text-6xl sm:text-7xl md:text-8xl lg:text-9xl font-bold tracking-tighter leading-[0.9];
  }

  .text-editorial-meta {
    @apply font-mono text-xs uppercase tracking-[0.2em] text-muted-foreground font-bold;
  }

  /* Layout Guides */
  .editorial-grid {
    @apply relative;
    background-image: linear-gradient(
      to right,
      hsl(var(--border) / 0.2) 1px,
      transparent 1px
    );
    background-size: 25% 100%;
  }

  /* Performance: Removed section containment as it may cause visibility issues on some mobile browsers */
  section {
    position: relative;
  }
}

@layer utilities {
  /* GPU-accelerated animations */
  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* Optimized hover effects */
  .optimized-hover {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
    will-change: transform;
  }

  .optimized-hover:hover {
    transform: translateY(-4px);
  }

  /* Smooth transitions for theme changes */
  .theme-transition {
    transition:
      background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      backdrop-filter 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }
}

.glass {
  @apply bg-background/60 backdrop-blur-md border border-white/10 dark:border-white/5;
  /* Force GPU acceleration for backdrop-blur */
  transform: translateZ(0);
}

/* Optimized ray animation */
@keyframes ray-animation {
  0% {
    transform: rotate(0deg) translateZ(0);
    opacity: 0;
  }
  50% {
    opacity: 0.5;
  }
  100% {
    transform: rotate(360deg) translateZ(0);
    opacity: 0;
  }
}

.animate-ray {
  animation: ray-animation 20s linear infinite;
  will-change: transform, opacity;
}

/* Removed View Transitions for instantaneous feel */

/* Loading skeleton animation */
@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.skeleton {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 25%,
    hsl(var(--muted-foreground) / 0.1) 50%,
    hsl(var(--muted)) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s ease-in-out infinite;
}

/* Ray Lights Effects */
.ray-light {
  background-color: hsla(216, 57%, 45%, 0.5);
  background: radial-gradient(
    ellipse closest-side at center,
    hsl(138, 57%, 69%) 0%,
    hsla(216, 57%, 45%, 0.5) 100%
  );
}

.ray-light-secondary {
  background-color: hsla(202, 56%, 31%, 0.25);
  background-image: radial-gradient(
    ellipse farthest-corner at center,
    hsl(164, 39%, 53%) 0%,
    hsla(202, 56%, 31%, 0.25) 55%
  );
}

/* Marker Pulse Animation */
@keyframes marker-pulse {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.8;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-marker-pulse {
  animation: marker-pulse 2s ease-in-out infinite;
}
